"use strict";var _classesMin=_interopRequireDefault(require("./_classes.min.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var addInput=document.querySelector(".app__add-input"),addBtn=document.querySelector(".app__add-btn"),tasksInfo=document.querySelector(".app__tasks-area-info"),tasksItems=document.getElementsByClassName("app__tasks-item"),tasksList=document.querySelector(".app__tasks-list"),taskArr=[],downloadTasksFromLocalStorage=function(){var t=JSON.parse(localStorage.getItem("tasksLocalCopy"));null!==t&&(t.forEach(function(t){return createNewTaskItem(t)}),taskArr=t)},updateLocalStorage=function(){var t=JSON.stringify(taskArr);localStorage.setItem("tasksLocalCopy",t)},updateNoneTasksInfo=function(){0===tasksItems.length?tasksInfo.style.display="block":tasksInfo.style.display="none"},createNewTaskItem=function(t){var e=t.text,s=t.id,t=t.isDone,a=document.createElement("li"),s=(a.classList.add("app__tasks-item"),a.setAttribute("id",s),document.createElement("p")),e=(s.classList.add("app__tasks-item-text"),s.textContent=e,!0===t&&s.classList.add("app__tasks-item-text--done"),document.createElement("div")),t=(e.classList.add("app__tasks-item-settings"),document.createElement("button")),n=(t.classList.add("done-btn"),t.innerHTML='<i class="fa-solid fa-check"></i>',document.createElement("button")),i=(n.classList.add("edit-btn"),n.innerHTML='<i class="fa-solid fa-pen-to-square"></i>',document.createElement("button")),o=(i.classList.add("save-btn"),i.innerHTML='<i class="fa-solid fa-floppy-disk"></i>',document.createElement("button"));o.classList.add("delete-btn"),o.innerHTML='<i class="fa-solid fa-trash"></i>',e.append(t,n,i,o),a.append(s,e),tasksList.append(a)},addNewTask=function(){var t;""!==addInput.value&&(t=new _classesMin.default(addInput.value),taskArr.push(t),createNewTaskItem(t),addInput.value=""),updateLocalStorage(),updateNoneTasksInfo()},checkTaskAsDone=function(t,e){e.classList.toggle("app__tasks-item-text--done");var s=parseInt(t.getAttribute("id"));taskArr.map(function(t){t.id===s&&(!0===t.isDone?t.isDone=!1:t.isDone=!0)}),updateLocalStorage()},deleteTask=function(t){var e=parseInt(t.getAttribute("id"));taskArr=taskArr.filter(function(t){return t.id!==e}),t.outerHTML="",updateLocalStorage(),updateNoneTasksInfo()},startEditText=function(t,e,s,a,n){t.contentEditable="true",t.focus(),e.style.visibility="hidden",s.style.visibility="hidden",a.style.display="none",n.style.display="block"},saveEditedText=function(t,e,s,a,n,i){e.contentEditable="false",s.style.visibility="visible",a.style.visibility="visible",n.style.display="block",i.style.display="none";var o=parseInt(t.getAttribute("id")),d=e.textContent;taskArr.map(function(t){t.id===o&&(t.text=d)}),updateLocalStorage()},closestTaskSettings=function(t){var e=t.target.closest(".app__tasks-item"),s=e.firstElementChild,a=t.target.closest("div").childNodes[0],n=t.target.closest("div").childNodes[3],i=t.target.closest("div").childNodes[1],o=t.target.closest("div").childNodes[2];t.target.classList.contains("fa-trash")&&deleteTask(e),t.target.classList.contains("fa-check")&&checkTaskAsDone(e,s),t.target.classList.contains("fa-pen-to-square")&&startEditText(s,a,n,i,o),t.target.classList.contains("fa-floppy-disk")&&saveEditedText(e,s,a,n,i,o)},keyShortcuts=function(t){"Enter"===t.key&&addNewTask()};downloadTasksFromLocalStorage(),updateNoneTasksInfo(),addBtn.addEventListener("click",addNewTask),document.addEventListener("click",function(t){return closestTaskSettings(t)}),document.addEventListener("keydown",function(t){return keyShortcuts(t)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl90b0RvQXBwLmpzIl0sIm5hbWVzIjpbIl9jbGFzc2VzTWluIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRvY3VtZW50IiwiYWRkQnRuIiwiYWRkSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwidGFza3NJbmZvIiwidGFza3NMaXN0IiwiZG93bmxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UiLCJwYXJzZWRBcnIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImNyZWF0ZU5ld1Rhc2tJdGVtIiwidGFza0FyciIsInVwZGF0ZUxvY2FsU3RvcmFnZSIsInRhc2tzU3RyIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInVwZGF0ZU5vbmVUYXNrc0luZm8iLCJ0YXNrc0l0ZW1zIiwibGVuZ3RoIiwic3R5bGUiLCJ0ZXh0IiwiX3JlZiIsImlkIiwiaXNEb25lIiwibmV3VGFzayIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuZXdUYXNrU2V0dGluZ3NEaXYiLCJuZXdUYXNrVGV4dCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwibmV3RG9uZUJ0biIsImlubmVySFRNTCIsIm5ld1NhdmVCdG4iLCJuZXdFZGl0QnRuIiwibmV3RGVsZXRlQnRuIiwiYXBwZW5kIiwiYWRkTmV3VGFzayIsIlRhc2siLCJ2YWx1ZSIsImNsb3Nlc3RJdGVtVGV4dCIsInBhcnNlSW50IiwidGFza0l0ZW0iLCJjbGlja2VkSWQiLCJjaGVja1Rhc2tBc0RvbmUiLCJ0b2dnbGUiLCJkZWxldGVUYXNrIiwiZm9jdXMiLCJjbG9zZXN0RWRpdEJ0biIsImNsb3Nlc3RTYXZlQnRuIiwiZGlzcGxheSIsImdldEF0dHJpYnV0ZSIsInNhdmVFZGl0ZWRUZXh0IiwiZmlsdGVyIiwiY2xvc2VzdERvbmVCdG4iLCJlZGl0ZWRUZXh0IiwiY2xvc2VzdERlbGV0ZUJ0biIsImNvbnRlbnRFZGl0YWJsZSIsImNsb3Nlc3RUYXNrU2V0dGluZ3MiLCJ0YXJnZXQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb3Nlc3QiLCJlIiwibWFwIiwiY2hpbGROb2RlcyIsImNvbnRhaW5zIiwic3RhcnRFZGl0VGV4dCIsImtleVNob3J0Y3V0cyIsImtleSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJhQUFBLElBQUFBLFlBQUFDLHVCQUFBQyxRQUFBLG1CQUFBLENBQUEsRUFBcUMsU0FBQUQsdUJBQUFFLEdBQUEsT0FBQUEsR0FBQUEsRUFBQUMsV0FBQUQsRUFBQSxDQUFBRSxRQUFBRixDQUFBLENBQUEsQ0FBckMsSUFBQUgsU0FBQU0sU0FBQUwsY0FBQSxpQkFBQSxFQUFxQ00sT0FBQU4sU0FBQUEsY0FBQSxlQUFBRSxFQUUvQkssVUFBV0YsU0FBU0csY0FBYyx1QkFBa0IsRUFDcERGLFdBQVNELFNBQVNHLHVCQUE2QixpQkFBQyxFQUNoREMsVUFBWUosU0FBU0csY0FBYyxrQkFBQSxFQUVuQ0UsUUFBUyxHQUlUQyw4QkFBZ0MsV0FDckMsSUFBQUMsRUFBYUMsS0FBT0MsTUFBTUMsYUFBYUMsUUFBUSxnQkFBQyxDQUFnQixFQUdyREMsT0FBVkwsSUFBQUEsRUFBc0JLLFFBQUtDLFNBQUFBLEdBQUFBLE9BQUFBLGtCQUFzQmhCLENBQUEsQ0FBQSxDQUFBLEVBQ2pEaUIsUUFEa0RQLEVBR3BELEVBRU1RLG1CQUFxQixXQUMxQixJQUFBQyxFQUFZUixLQUFPUyxVQUFVSCxPQUFDQSxFQUM5QkosYUFBWVEsUUFBUSxpQkFBaUJGLENBQUVBLENBSXhDLEVBRU1HLG9CQUFzQixXQUNOLElBQXJCQyxXQUFjQyxPQUNiakIsVUFBQUEsTUFBVWtCLFFBQWEsUUFFdkJsQixVQUFBQSxNQUFVa0IsUUFBYSxNQUV6QixFQUU2QkMsa0JBQUksU0FBQUMsR0FBQSxJQUFBRCxFQUFBQyxFQUFBRCxLQUFBRSxFQUFBRCxFQUFBQyxHQUFBQyxFQUFBRixFQUFBRSxPQUFJQyxFQUFBM0IsU0FBQTRC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LCJmaWxlIjoiX3RvRG9BcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRhc2sgZnJvbSAnLi9fY2xhc3Nlcy5taW4uanMnO1xyXG5cclxuY29uc3QgYWRkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19hZGQtaW5wdXQnKTtcclxuY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYWRkLWJ0bicpO1xyXG5jb25zdCB0YXNrc0luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX190YXNrcy1hcmVhLWluZm8nKTtcclxuY29uc3QgdGFza3NJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FwcF9fdGFza3MtaXRlbScpO1xyXG5jb25zdCB0YXNrc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX190YXNrcy1saXN0Jyk7XHJcblxyXG5sZXQgdGFza0FyciA9IFtdO1xyXG5cclxuY29uc3QgZG93bmxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UgPSAoKSA9PiB7XHJcblx0bGV0IHBhcnNlZEFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzTG9jYWxDb3B5JykpO1xyXG5cclxuXHRpZiAocGFyc2VkQXJyICE9PSBudWxsKSB7XHJcblx0XHRwYXJzZWRBcnIuZm9yRWFjaCgob2JqKSA9PiBjcmVhdGVOZXdUYXNrSXRlbShvYmopKTtcclxuXHRcdHRhc2tBcnIgPSBwYXJzZWRBcnI7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlTG9jYWxTdG9yYWdlID0gKCkgPT4ge1xyXG5cdGxldCB0YXNrc1N0ciA9IEpTT04uc3RyaW5naWZ5KHRhc2tBcnIpO1xyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrc0xvY2FsQ29weScsIHRhc2tzU3RyKTtcclxuXHJcblx0Ly8gbGV0IHNldHRpbmdzU3RyID0gSlNPTi5zdHJpbmdpZnkodXNlclNldHRpbmdzKTtcclxuXHQvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclNldHRpbmdzTG9jYWxDb3B5Jywgc2V0dGluZ3NTdHIpO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlTm9uZVRhc2tzSW5mbyA9ICgpID0+IHtcclxuXHRpZiAodGFza3NJdGVtcy5sZW5ndGggPT09IDApIHtcclxuXHRcdHRhc2tzSW5mby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0dGFza3NJbmZvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlTmV3VGFza0l0ZW0gPSAoeyB0ZXh0LCBpZCwgaXNEb25lIH0pID0+IHtcclxuXHRjb25zdCBuZXdUYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHRuZXdUYXNrLmNsYXNzTGlzdC5hZGQoJ2FwcF9fdGFza3MtaXRlbScpO1xyXG5cdG5ld1Rhc2suc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcclxuXHJcblx0Y29uc3QgbmV3VGFza1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcblx0bmV3VGFza1RleHQuY2xhc3NMaXN0LmFkZCgnYXBwX190YXNrcy1pdGVtLXRleHQnKTtcclxuXHRuZXdUYXNrVGV4dC50ZXh0Q29udGVudCA9IHRleHQ7XHJcblxyXG5cdGlmIChpc0RvbmUgPT09IHRydWUpIHtcclxuXHRcdG5ld1Rhc2tUZXh0LmNsYXNzTGlzdC5hZGQoJ2FwcF9fdGFza3MtaXRlbS10ZXh0LS1kb25lJyk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBuZXdUYXNrU2V0dGluZ3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRuZXdUYXNrU2V0dGluZ3NEaXYuY2xhc3NMaXN0LmFkZCgnYXBwX190YXNrcy1pdGVtLXNldHRpbmdzJyk7XHJcblxyXG5cdGNvbnN0IG5ld0RvbmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRuZXdEb25lQnRuLmNsYXNzTGlzdC5hZGQoJ2RvbmUtYnRuJyk7XHJcblx0bmV3RG9uZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT4nO1xyXG5cclxuXHRjb25zdCBuZXdFZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0bmV3RWRpdEJ0bi5jbGFzc0xpc3QuYWRkKCdlZGl0LWJ0bicpO1xyXG5cdG5ld0VkaXRCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGVuLXRvLXNxdWFyZVwiPjwvaT4nO1xyXG5cclxuXHRjb25zdCBuZXdTYXZlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0bmV3U2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdzYXZlLWJ0bicpO1xyXG5cdG5ld1NhdmVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEtc29saWQgZmEtZmxvcHB5LWRpc2tcIj48L2k+JztcclxuXHJcblx0Y29uc3QgbmV3RGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0bmV3RGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZS1idG4nKTtcclxuXHRuZXdEZWxldGVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+JztcclxuXHJcblx0bmV3VGFza1NldHRpbmdzRGl2LmFwcGVuZChuZXdEb25lQnRuLCBuZXdFZGl0QnRuLCBuZXdTYXZlQnRuLCBuZXdEZWxldGVCdG4pO1xyXG5cdG5ld1Rhc2suYXBwZW5kKG5ld1Rhc2tUZXh0LCBuZXdUYXNrU2V0dGluZ3NEaXYpO1xyXG5cdHRhc2tzTGlzdC5hcHBlbmQobmV3VGFzayk7XHJcbn07XHJcblxyXG5jb25zdCBhZGROZXdUYXNrID0gKCkgPT4ge1xyXG5cdGlmIChhZGRJbnB1dC52YWx1ZSAhPT0gJycpIHtcclxuXHRcdGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayhhZGRJbnB1dC52YWx1ZSk7XHJcblxyXG5cdFx0dGFza0Fyci5wdXNoKG5ld1Rhc2spO1xyXG5cdFx0Y3JlYXRlTmV3VGFza0l0ZW0obmV3VGFzayk7XHJcblxyXG5cdFx0YWRkSW5wdXQudmFsdWUgPSAnJztcclxuXHR9XHJcblxyXG5cdHVwZGF0ZUxvY2FsU3RvcmFnZSgpO1xyXG5cdHVwZGF0ZU5vbmVUYXNrc0luZm8oKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrVGFza0FzRG9uZSA9ICh0YXNrSXRlbSwgY2xvc2VzdEl0ZW1UZXh0KSA9PiB7XHJcblx0Y2xvc2VzdEl0ZW1UZXh0LmNsYXNzTGlzdC50b2dnbGUoJ2FwcF9fdGFza3MtaXRlbS10ZXh0LS1kb25lJyk7XHJcblxyXG5cdGNvbnN0IGNsaWNrZWRJZCA9IHBhcnNlSW50KHRhc2tJdGVtLmdldEF0dHJpYnV0ZSgnaWQnKSk7XHJcblx0dGFza0Fyci5tYXAoKG9iaikgPT4ge1xyXG5cdFx0aWYgKG9iai5pZCA9PT0gY2xpY2tlZElkKSB7XHJcblx0XHRcdGlmIChvYmouaXNEb25lID09PSB0cnVlKSB7XHJcblx0XHRcdFx0b2JqLmlzRG9uZSA9IGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG9iai5pc0RvbmUgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHVwZGF0ZUxvY2FsU3RvcmFnZSgpO1xyXG59O1xyXG5cclxuY29uc3QgZGVsZXRlVGFzayA9ICh0YXNrSXRlbSkgPT4ge1xyXG5cdGNvbnN0IGNsaWNrZWRJZCA9IHBhcnNlSW50KHRhc2tJdGVtLmdldEF0dHJpYnV0ZSgnaWQnKSk7XHJcblxyXG5cdHRhc2tBcnIgPSB0YXNrQXJyLmZpbHRlcigob2JqKSA9PiBvYmouaWQgIT09IGNsaWNrZWRJZCk7XHJcblxyXG5cdHRhc2tJdGVtLm91dGVySFRNTCA9ICcnO1xyXG5cdHVwZGF0ZUxvY2FsU3RvcmFnZSgpO1xyXG5cdHVwZGF0ZU5vbmVUYXNrc0luZm8oKTtcclxufTtcclxuXHJcbmNvbnN0IHN0YXJ0RWRpdFRleHQgPSAoXHJcblx0Y2xvc2VzdEl0ZW1UZXh0LFxyXG5cdGNsb3Nlc3REb25lQnRuLFxyXG5cdGNsb3Nlc3REZWxldGVCdG4sXHJcblx0Y2xvc2VzdEVkaXRCdG4sXHJcblx0Y2xvc2VzdFNhdmVCdG5cclxuKSA9PiB7XHJcblx0Y2xvc2VzdEl0ZW1UZXh0LmNvbnRlbnRFZGl0YWJsZSA9ICd0cnVlJztcclxuXHRjbG9zZXN0SXRlbVRleHQuZm9jdXMoKTtcclxuXHRjbG9zZXN0RG9uZUJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblx0Y2xvc2VzdERlbGV0ZUJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblx0Y2xvc2VzdEVkaXRCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRjbG9zZXN0U2F2ZUJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxufTtcclxuXHJcbmNvbnN0IHNhdmVFZGl0ZWRUZXh0ID0gKFxyXG5cdHRhc2tJdGVtLFxyXG5cdGNsb3Nlc3RJdGVtVGV4dCxcclxuXHRjbG9zZXN0RG9uZUJ0bixcclxuXHRjbG9zZXN0RGVsZXRlQnRuLFxyXG5cdGNsb3Nlc3RFZGl0QnRuLFxyXG5cdGNsb3Nlc3RTYXZlQnRuXHJcbikgPT4ge1xyXG5cdGNsb3Nlc3RJdGVtVGV4dC5jb250ZW50RWRpdGFibGUgPSAnZmFsc2UnO1xyXG5cdGNsb3Nlc3REb25lQnRuLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcblx0Y2xvc2VzdERlbGV0ZUJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG5cdGNsb3Nlc3RFZGl0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdGNsb3Nlc3RTYXZlQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG5cdGNvbnN0IGNsaWNrZWRJZCA9IHBhcnNlSW50KHRhc2tJdGVtLmdldEF0dHJpYnV0ZSgnaWQnKSk7XHJcblx0Y29uc3QgZWRpdGVkVGV4dCA9IGNsb3Nlc3RJdGVtVGV4dC50ZXh0Q29udGVudDtcclxuXHJcblx0dGFza0Fyci5tYXAoKG9iaikgPT4ge1xyXG5cdFx0aWYgKG9iai5pZCA9PT0gY2xpY2tlZElkKSB7XHJcblx0XHRcdG9iai50ZXh0ID0gZWRpdGVkVGV4dDtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0dXBkYXRlTG9jYWxTdG9yYWdlKCk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZXN0VGFza1NldHRpbmdzID0gKGUpID0+IHtcclxuXHRjb25zdCB0YXNrSXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hcHBfX3Rhc2tzLWl0ZW0nKTtcclxuXHRjb25zdCBjbG9zZXN0SXRlbVRleHQgPSB0YXNrSXRlbS5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHRjb25zdCBjbG9zZXN0RG9uZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmNoaWxkTm9kZXNbMF07XHJcblx0Y29uc3QgY2xvc2VzdERlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmNoaWxkTm9kZXNbM107XHJcblx0Y29uc3QgY2xvc2VzdEVkaXRCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCdkaXYnKS5jaGlsZE5vZGVzWzFdO1xyXG5cdGNvbnN0IGNsb3Nlc3RTYXZlQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnZGl2JykuY2hpbGROb2Rlc1syXTtcclxuXHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmEtdHJhc2gnKSkge1xyXG5cdFx0ZGVsZXRlVGFzayh0YXNrSXRlbSk7XHJcblx0fVxyXG5cclxuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS1jaGVjaycpKSB7XHJcblx0XHRjaGVja1Rhc2tBc0RvbmUodGFza0l0ZW0sIGNsb3Nlc3RJdGVtVGV4dCk7XHJcblx0fVxyXG5cclxuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS1wZW4tdG8tc3F1YXJlJykpIHtcclxuXHRcdHN0YXJ0RWRpdFRleHQoXHJcblx0XHRcdGNsb3Nlc3RJdGVtVGV4dCxcclxuXHRcdFx0Y2xvc2VzdERvbmVCdG4sXHJcblx0XHRcdGNsb3Nlc3REZWxldGVCdG4sXHJcblx0XHRcdGNsb3Nlc3RFZGl0QnRuLFxyXG5cdFx0XHRjbG9zZXN0U2F2ZUJ0blxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZhLWZsb3BweS1kaXNrJykpIHtcclxuXHRcdHNhdmVFZGl0ZWRUZXh0KFxyXG5cdFx0XHR0YXNrSXRlbSxcclxuXHRcdFx0Y2xvc2VzdEl0ZW1UZXh0LFxyXG5cdFx0XHRjbG9zZXN0RG9uZUJ0bixcclxuXHRcdFx0Y2xvc2VzdERlbGV0ZUJ0bixcclxuXHRcdFx0Y2xvc2VzdEVkaXRCdG4sXHJcblx0XHRcdGNsb3Nlc3RTYXZlQnRuXHJcblx0XHQpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGtleVNob3J0Y3V0cyA9IChlKSA9PiB7XHJcblx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRhZGROZXdUYXNrKCk7XHJcblx0fVxyXG59O1xyXG5cclxuZG93bmxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UoKTtcclxudXBkYXRlTm9uZVRhc2tzSW5mbygpO1xyXG5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGROZXdUYXNrKTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gY2xvc2VzdFRhc2tTZXR0aW5ncyhlKSk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ga2V5U2hvcnRjdXRzKGUpKTtcclxuIl19
